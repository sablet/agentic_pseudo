## オーケストレーションシステム概要：個人開発におけるPoC迅速化のための設計方針

### 1\. プロジェクトの目的と背景

本プロジェクトは、複雑なソフトウェア開発プロセス（特に金融市場モデル構築のような多段階のタスクチェーン）を効率的にオーケストレーションするシステムを個人開発で構築することを目的とします。最終的な目標は、**プロトタイプ作成やPoC（概念実証）の迅速化**を図ることにあります。

特に、以下の2点を重視することで、開発効率の向上と品質確保を目指します。

  * **サブエージェント間の入出力連鎖の確実な制御**: あるサブエージェントの出力が、次のサブエージェントの入力として正確に渡される仕組みを構築します。
  * **ユーザーチェックの組み込みによる手戻り削減と品質向上**: 各工程の成果物に対してユーザーの確認・承認プロセスを導入し、後工程での大きな手戻りを防ぎ、最終成果物の品質を高めます。

### 2\. 重視する機能要件

上記の目的を達成するために、以下の機能要件を必須とします。

#### 2.1. タスク定義の柔軟性（入出力制御）

  * **プロンプト変数展開による動的な入力設定**:
      * 各タスクのプロンプト（指示内容）にプレースホルダーを設定し、先行するタスクの実行結果を自動的に埋め込む機能を必須とします。
      * これにより、サブエージェント間のデータ連携がシームレスに行われ、タスクの自動化と連鎖が可能になります。

#### 2.2. ユーザーインターフェース (UI) 設計

  * **タスク結果の表示とレビューインターフェース**:
      * 各タスク、特にLLM（大規模言語モデル）を用いたエージェントの実行結果テキストをUI上で明確に表示できることを必須とします。
      * ユーザーがこれらの結果を確認し、「**承認**」または「**差し戻し**」といった操作を簡単に行えるインターフェースを提供します。
      * フェーズごとの簡易的な説明やレポート表示機能を持ち、フェーズ間の進行をユーザーがコントロールできる設計とします。
  * **実行ログの閲覧**:
      * 各タスクの実行ログ（LLMの実行結果テキストを含む）をUI上で確認できる機能を必須とします。これにより、問題発生時のデバッグやプロセス追跡が容易になります。

#### 2.3. 既存APIとの連携容易性

  * 現時点では、提示された[Agentic Task Management SystemのBackend API](https://www.google.com/search?q=https://github.com/hi-ok/backend-for-agentic-task-management-system/blob/main/docs/api.md) を活用し、追加のAPI機能は必須としない方針です。
  * 具体的には、`POST /api/tasks/create` の `need` フィールドによるタスク依存関係の定義、および `PUT /api/tasks/update/{session_id}/{task_id}` によるユーザー介入時のタスクステータス更新や結果追記を活用して要件を満たします。

### 3\. タスク実行とユーザーチェックの関係性

提供された金融市場モデル構築のタスクグラフに基づき、以下の関係性を重視します。

  * **データフロー**: タスク間の依存関係は、提示されたMermaidグラフの通りとします。各タスクの出力が次のタスクの入力となる「データフロー」を重視し、プロンプト変数展開によってこれを実現します。
  * **手動介入ポイント**: ユーザーのチェックは、**フェーズ単位**で組み込みます。具体的には、各フェーズ（例: フェーズ1「環境構築とデータ準備」）内の全タスクが完了した時点で、そのフェーズで実行された内容の**簡易的な説明またはレポート**をユーザーに提示します。
      * ユーザーはこの簡易レポートを基に、次のフェーズへ進むか、あるいは前のフェーズ（または特定のタスク）を差し戻して修正を指示するかを決定します。
      * **最終的なモデルの評価結果 (フェーズ4: 4.4 最終予測精度・安定性評価の後)** のタイミングで、より詳細な結果確認と最終的な承認プロセスを設けることを想定しています。

-----

### 4\. 想定される懸念事項

プロジェクトを進める上で、特に以下の2点について懸念を考慮し、対応方針を検討します。

  * **UI開発の工数**: 個人開発であるため、直感的で使いやすいUIを開発する際の時間的・技術的な負担が懸念されます。既存のUIフレームワークやコンポーネントを最大限活用し、効率的な開発を目指します。
  * **既存APIの機能不足**: 現在のAPIで連携機能は実現可能と判断しましたが、特にユーザーチェックを挟んだタスクの停止・再開や、タスク結果のレビューフローを円滑にするための追加のUI・API連携ロジックが必要になる可能性があります。これは実装を進める中で適宜検討・調整を行います。

-----