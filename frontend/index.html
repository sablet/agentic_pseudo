<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Task Management System</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans JP', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo {
            font-size: 18px;
            font-weight: 700;
            color: #f8fafc;
        }
        
        .search-bar {
            position: relative;
            width: 300px;
        }
        
        .search-bar input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #475569;
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .search-bar input::placeholder {
            color: #cbd5e1;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #475569;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }
        
        /* Sidebar */
        .sidebar {
            width: 320px;
            background: white;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            margin-top: 60px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .create-task-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .create-task-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }
        
        .task-filters {
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .filter-group {
            margin-bottom: 15px;
        }
        
        .filter-group label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-select {
            width: 100%;
            padding: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            background-color: white;
        }
        
        .task-list {
            flex: 1;
            overflow-y: auto;
            padding: 0 20px;
        }
        
        .task-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .task-item:hover {
            border-color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
        }
        
        .task-item.active {
            border-color: #3b82f6;
            background: #f0f9ff;
        }
        
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .task-title {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            line-height: 1.4;
        }
        
        .task-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .task-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 12px;
            color: #64748b;
            margin-top: 8px;
        }
        
        .task-agent {
            background-color: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .task-time {
            font-size: 11px;
            color: #94a3b8;
        }
        
        .status-ÊÉÖÂ†±ÂèéÈõÜ‰∏≠ { background-color: #dbeafe; color: #1e40af; }
        .status-ÂàÜÊûê‰∏≠ { background-color: #fef3c7; color: #d97706; }
        .status-„É¨„Éù„Éº„Éà‰ΩúÊàê‰∏≠ { background-color: #e0e7ff; color: #5b21b6; }
        .status-ÂÆå‰∫Ü { background-color: #dcfce7; color: #16a34a; }
        .status-„Ç®„É©„Éº { background-color: #fecaca; color: #dc2626; }
        .status-ÂæÖÊ©ü‰∏≠ { background-color: #f1f5f9; color: #475569; }
        .status-pending { background-color: #f1f5f9; color: #475569; }
        .status-in_progress { background-color: #fef3c7; color: #d97706; }
        .status-completed { background-color: #dcfce7; color: #16a34a; }
        .status-failed { background-color: #fecaca; color: #dc2626; }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-top: 60px;
            overflow: hidden;
        }
        
        .content-header {
            padding: 20px;
            background: white;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: between;
            align-items: center;
        }
        
        .content-title {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
        }
        
        .content-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8fafc;
        }
        
        .section {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .section h2 {
            color: #1e293b;
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 600;
            border-bottom: 2px solid #1e40af;
            padding-bottom: 8px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        textarea {
            height: 120px;
            resize: vertical;
        }
        
        button {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
        }
        
        button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
            border: 1px solid #bbf7d0;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
            color: #166534;
            font-size: 14px;
        }
        
        .error-box {
            background: linear-gradient(135deg, #fef2f2 0%, #fef7f7 100%);
            border: 1px solid #fecaca;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
            color: #dc2626;
            font-size: 14px;
        }
        
        .session-info {
            background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);
            border: 1px solid #bfdbfe;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 20px;
            color: #1e40af;
            font-weight: 600;
        }
        
        .progress-section {
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            display: flex;
            margin-bottom: 12px;
        }
        
        .progress-segment {
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .progress-legend {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            font-size: 13px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        
        .result-content {
            background: #f8fafc;
            padding: 16px;
            border-radius: 6px;
            margin-top: 8px;
            border-left: 4px solid #3b82f6;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .flow-diagram {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            overflow: auto;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .empty-state-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .empty-state-subtext {
            font-size: 14px;
            color: #94a3b8;
        }
        
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 40vh;
                margin-top: 0;
            }
            
            .main-content {
                margin-top: 0;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="logo">ü§ñ Agentic Task Manager</div>
                <div class="search-bar">
                    <input type="text" placeholder="„Çø„Çπ„ÇØ„ÇíÊ§úÁ¥¢..." id="searchInput">
                </div>
            </div>
            <div class="header-right">
                <div id="sessionInfo" class="session-info" style="display: none;">
                    „Çª„ÉÉ„Ç∑„Éß„É≥: <span id="currentSessionId"></span>
                </div>
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <button class="create-task-btn" onclick="createSession()">
                    ‚ûï Êñ∞„Åó„ÅÑ„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê
                </button>
            </div>
            
            <div class="task-filters">
                <div class="filter-group">
                    <label>„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                    <select class="filter-select" id="statusFilter" onchange="filterTasks()">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="pending">ÂæÖÊ©ü‰∏≠</option>
                        <option value="in_progress">ÂÆüË°å‰∏≠</option>
                        <option value="completed">ÂÆå‰∫Ü</option>
                        <option value="failed">Â§±Êïó</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>„Ç®„Éº„Ç∏„Çß„É≥„Éà</label>
                    <select class="filter-select" id="agentFilter" onchange="filterTasks()">
                        <option value="">„Åô„Åπ„Å¶</option>
                    </select>
                </div>
            </div>
            
            <div class="task-list" id="taskList">
                <div class="empty-state">
                    <div class="empty-state-icon">üìã</div>
                    <div class="empty-state-text">„Çø„Çπ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                    <div class="empty-state-subtext">Êñ∞„Åó„ÅÑ„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="content-header">
                <div class="content-title" id="contentTitle">„Çø„Çπ„ÇØÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</div>
                <div id="sessionStatus"></div>
            </div>
            
            <div class="content-body" id="contentBody">
                <div class="section">
                    <h2>üéØ „Éí„Ç¢„É™„É≥„Ç∞ÁµêÊûúÁôªÈå≤</h2>
                    <div class="form-group">
                        <label for="useCaseSelect">„Çµ„É≥„Éó„É´„É¶„Éº„Çπ„Ç±„Éº„ÇπÈÅ∏Êäû:</label>
                        <select id="useCaseSelect" onchange="loadUseCase()">
                            <option value="">-- „Ç´„Çπ„Çø„É†ÂÖ•Âäõ --</option>
                            <option value="market_research">Â∏ÇÂ†¥Ë™øÊüª„É¨„Éù„Éº„Éà‰ΩúÊàê</option>
                            <option value="data_analysis">„Éá„Éº„ÇøÂàÜÊûê„É¨„Éù„Éº„Éà‰ΩúÊàê</option>
                            <option value="project_management">Ë§áÂêàÁöÑ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="hearingResult">„Éí„Ç¢„É™„É≥„Ç∞ÁµêÊûú:</label>
                        <textarea id="hearingResult" placeholder="„É¶„Éº„Ç∂„Éº„ÅÆË¶ÅÊúõ„ÇÑË©≥Á¥∞„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                    </div>
                    <button onclick="saveHearing()">„Éí„Ç¢„É™„É≥„Ç∞ÁµêÊûú„Çí‰øùÂ≠ò</button>
                    <div id="hearingStatus"></div>
                </div>
                
                <div class="section">
                    <h2>üìù „Çø„Çπ„ÇØ„Éó„É©„É≥‰ΩúÊàê</h2>
                    <div class="form-group">
                        <label for="userInstruction">„É¶„Éº„Ç∂„ÉºÊåáÁ§∫:</label>
                        <textarea id="userInstruction" placeholder="ÂÆüË°å„Åó„Åü„ÅÑ„Çø„Çπ„ÇØ„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                    </div>
                    <button onclick="createTaskPlan()">„Çø„Çπ„ÇØ„Éó„É©„É≥„Çí‰ΩúÊàê</button>
                    <div id="planStatus"></div>
                </div>
                
                <div class="section">
                    <h2>‚ö° „Çø„Çπ„ÇØÂÆüË°å„ÉªÁõ£Ë¶ñ</h2>
                    <button onclick="executeTaskPlan()">„Çø„Çπ„ÇØ„Éó„É©„É≥„ÇíÂÆüË°å</button>
                    <button onclick="getTaskStatus()">„Çπ„ÉÜ„Éº„Çø„Çπ„ÇíÊõ¥Êñ∞</button>
                    <div id="executionStatus"></div>
                    <div id="taskProgress"></div>
                </div>
                
                <div class="section">
                    <h2>üìä „Çø„Çπ„ÇØ„Éï„É≠„Éº</h2>
                    <div id="flowDiagram" class="flow-diagram">
                        <div class="empty-state">
                            <div class="empty-state-icon">üîÑ</div>
                            <div class="empty-state-text">„Éï„É≠„ÉºÂõ≥„ÅØ„Çø„Çπ„ÇØ‰ΩúÊàêÂæå„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</div>
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <h2>üîß Âà©Áî®ÂèØËÉΩ„Å™„Ç®„Éº„Ç∏„Çß„É≥„Éà</h2>
                    <button onclick="getAvailableAgents()">„Ç®„Éº„Ç∏„Çß„É≥„Éà‰∏ÄË¶ß„ÇíÂèñÂæó</button>
                    <div id="agentsList"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:8000';
        let currentSessionId = null;

        // Global variables
        let allTasks = [];
        let selectedTaskId = null;
        let availableAgents = [];
        
        // Initialize Mermaid
        mermaid.initialize({ startOnLoad: true, theme: 'default' });

        // Unicode „Ç®„Çπ„Ç±„Éº„ÉóÊñáÂ≠ó„Çí„Éá„Ç≥„Éº„Éâ„Åô„ÇãÈñ¢Êï∞
        function decodeUnicodeText(text) {
            if (typeof text !== 'string') return text;
            try {
                // „Éá„Éê„ÉÉ„Ç∞Áî®„É≠„Ç∞
                if (text.includes('\\u')) {
                    console.log('Original text:', text);
                }
                
                // Ë§áÊï∞„ÅÆÊñáÂ≠óÂåñ„Åë„Éë„Çø„Éº„É≥„Å´ÂØæÂøú
                let decoded = text;
                
                // „Éë„Çø„Éº„É≥1: \uXXXXÂΩ¢Âºè„ÅÆUnicode„Ç®„Çπ„Ç±„Éº„Éó
                decoded = decoded.replace(/\\u[\dA-Fa-f]{4}/g, function(match) {
                    return String.fromCharCode(parseInt(match.replace(/\\u/g, ''), 16));
                });
                
                // „Éë„Çø„Éº„É≥2: UTF-8„ÅÆË™§„Å£„ÅüËß£ÈáàÔºàÊó•Êú¨Ë™ûÁâπÊúâ„ÅÆÊñáÂ≠óÂåñ„ÅëÔºâ
                // "√£"„ÅØÊñáÂ≠óÂåñ„Åë„ÅÆÂÖ∏Âûã‰æã
                const charMapping = {
                    '√£': '',
                    '√£': '„ÅÆ',
                    '√£': '„Çí',
                    '√£': '„Åó',
                    '√£': '„Å¶',
                    '√£': '„ÅÑ',
                    '√£': '„Çã',
                    '√£': '„Åã',
                    '√£': '„Å®',
                    '√£': '„Åô',
                    '√£': '„Åß',
                    '√£': '„Å´',
                    '√£': '„ÅØ',
                    '√£': '„Åå',
                    '√£': '„ÇÇ',
                    '√£': '„Åæ',
                    '√£': '„Åü',
                    '√£': '„Åç',
                    '√£': '„Å™',
                    '√£': '„Çå',
                    '√£': '„Çâ',
                    '√£': '„Åì',
                    '√£': '„Çä',
                    '√£': '„Åï',
                    '√£': '„Åë',
                    '√£': '„Çì',
                    '√£': '„ÅÇ',
                    '√£': '„ÇÑ',
                    '√£': '„Åø',
                    '√£': '„ÅÜ',
                    '√£': '„Åà',
                    '√£': '„ÇÅ',
                    '√£': '„Åõ',
                    '√£': '„Å°',
                    '√£': '„Å§',
                    '√£': '„Å≤',
                    '√£': '„Å≠',
                    '√£': '„Å∏',
                    '√£': '„Çà',
                    '√£': '„Åª',
                    '√£': '„Çè',
                    '√£': '„Åù',
                    '√£': '„Å¨',
                    '√£': '„Åµ',
                    '√£': '„ÇÜ',
                    '√£': '„Åä',
                    '√§': '',
                    '√®': '',
                    '√¶': ''
                };
                
                // ÊñáÂ≠óÂåñ„Åë„Éë„Çø„Éº„É≥„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÈÅ©Áî®
                for (const [corrupted, correct] of Object.entries(charMapping)) {
                    decoded = decoded.replace(new RegExp(corrupted, 'g'), correct);
                }
                
                // „Éë„Çø„Éº„É≥3: base64„Éá„Ç≥„Éº„ÉâÔºàÂèØËÉΩÊÄß„Å®„Åó„Å¶Ôºâ
                try {
                    if (decoded.match(/^[A-Za-z0-9+/]+=*$/)) {
                        const base64Decoded = atob(decoded);
                        if (base64Decoded.length > 0 && base64Decoded !== decoded) {
                            decoded = base64Decoded;
                        }
                    }
                } catch (e) {
                    // base64„Éá„Ç≥„Éº„Éâ„Å´Â§±Êïó„Åó„ÅüÂ†¥Âêà„ÅØÂÖÉ„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Çí‰ΩøÁî®
                }
                
                // „Éá„Éê„ÉÉ„Ç∞Áî®„É≠„Ç∞
                if (decoded !== text) {
                    console.log('Decoded text:', decoded);
                }
                
                return decoded;
            } catch (error) {
                console.warn('Unicode decode error:', error);
                return text;
            }
        }

        // „Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÂÖ®„Å¶„ÅÆÊñáÂ≠óÂàó„Éó„É≠„Éë„ÉÜ„Ç£„Çí„Éá„Ç≥„Éº„Éâ„Åô„ÇãÈñ¢Êï∞
        function decodeObjectText(obj) {
            if (obj === null || obj === undefined) return obj;
            
            if (typeof obj === 'string') {
                // Ëã±Â≠ó„ÅÆ„Åø„ÅÆÊñáÂ≠óÂàóÔºà„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂêç„Å™„Å©Ôºâ„ÅØ„Éá„Ç≥„Éº„Éâ„Åó„Å™„ÅÑ
                if (/^[a-zA-Z_]+$/.test(obj)) {
                    return obj;
                }
                return decodeUnicodeText(obj);
            }
            
            if (Array.isArray(obj)) {
                return obj.map(item => decodeObjectText(item));
            }
            
            if (typeof obj === 'object') {
                const decoded = {};
                for (const [key, value] of Object.entries(obj)) {
                    // „Ç≠„ÉºÂêç„ÇÇËã±Â≠ó„ÅÆ„Åø„ÅÆÂ†¥Âêà„ÅØ„Åù„ÅÆ„Åæ„Åæ‰ΩøÁî®
                    const decodedKey = /^[a-zA-Z_]+$/.test(key) ? key : decodeUnicodeText(key);
                    decoded[decodedKey] = decodeObjectText(value);
                }
                return decoded;
            }
            
            return obj;
        }

        async function apiCall(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json; charset=utf-8',
                    }
                };
                
                if (data) {
                    options.body = JSON.stringify(data);
                }
                
                const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const responseData = await response.json();
                // „É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„ÅÆUnicode„Ç®„Çπ„Ç±„Éº„ÉóÊñáÂ≠ó„Çí„Éá„Ç≥„Éº„Éâ
                return decodeObjectText(responseData);
            } catch (error) {
                console.error('API call error:', error);
                throw error;
            }
        }

        function showStatus(elementId, message, isError = false) {
            const element = document.getElementById(elementId);
            // „É°„ÉÉ„Çª„Éº„Ç∏„ÇÇUnicode„Éá„Ç≥„Éº„Éâ„ÇíÈÅ©Áî®
            const decodedMessage = decodeUnicodeText(message);
            element.innerHTML = `<div class="${isError ? 'error-box' : 'status-box'}">${decodedMessage}</div>`;
        }

        function updateSessionInfo() {
            const sessionInfo = document.getElementById('sessionInfo');
            const sessionIdSpan = document.getElementById('currentSessionId');
            
            if (currentSessionId) {
                sessionIdSpan.textContent = currentSessionId;
                sessionInfo.style.display = 'block';
            } else {
                sessionInfo.style.display = 'none';
            }
        }

        function filterTasks() {
            const statusFilter = document.getElementById('statusFilter').value;
            const agentFilter = document.getElementById('agentFilter').value;
            
            let filteredTasks = allTasks;
            
            if (statusFilter) {
                filteredTasks = filteredTasks.filter(task => task.status === statusFilter);
            }
            
            if (agentFilter) {
                filteredTasks = filteredTasks.filter(task => task.agent === agentFilter);
            }
            
            displayTaskList(filteredTasks);
        }

        function displayTaskList(tasks) {
            const taskList = document.getElementById('taskList');
            
            if (!tasks || tasks.length === 0) {
                taskList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <div class="empty-state-text">„Çø„Çπ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                        <div class="empty-state-subtext">Êñ∞„Åó„ÅÑ„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>
                    </div>
                `;
                return;
            }
            
            let html = '';
            tasks.forEach(task => {
                const isActive = task.id === selectedTaskId ? 'active' : '';
                const statusClass = `status-${task.status}`;
                
                html += `
                    <div class="task-item ${isActive}" onclick="selectTask('${task.id}')">
                        <div class="task-header">
                            <div class="task-title">${decodeUnicodeText(task.task)}</div>
                            <div class="task-status ${statusClass}">${decodeUnicodeText(task.status)}</div>
                        </div>
                        <div class="task-meta">
                            <span class="task-agent">${/^[a-zA-Z_]+$/.test(task.agent) ? task.agent : decodeUnicodeText(task.agent)}</span>
                            <span class="task-time">${task.updated_at || 'N/A'}</span>
                        </div>
                    </div>
                `;
            });
            
            taskList.innerHTML = html;
        }

        function selectTask(taskId) {
            selectedTaskId = taskId;
            const task = allTasks.find(t => t.id === taskId);
            
            if (task) {
                displayTaskDetails(task);
                displayTaskList(allTasks); // Re-render to show active state
            }
        }

        function displayTaskDetails(task) {
            const contentTitle = document.getElementById('contentTitle');
            const contentBody = document.getElementById('contentBody');
            
            contentTitle.textContent = decodeUnicodeText(task.task);
            
            let html = `
                <div class="section">
                    <h2>üìã „Çø„Çπ„ÇØË©≥Á¥∞</h2>
                    <div class="form-group">
                        <label>„Çø„Çπ„ÇØID:</label>
                        <div>${task.id}</div>
                    </div>
                    <div class="form-group">
                        <label>„Çø„Çπ„ÇØÂêç:</label>
                        <div>${decodeUnicodeText(task.task)}</div>
                    </div>
                    <div class="form-group">
                        <label>„Ç®„Éº„Ç∏„Çß„É≥„Éà:</label>
                        <div>${/^[a-zA-Z_]+$/.test(task.agent) ? task.agent : decodeUnicodeText(task.agent)}</div>
                    </div>
                    <div class="form-group">
                        <label>„Çπ„ÉÜ„Éº„Çø„Çπ:</label>
                        <div class="task-status status-${task.status}">${decodeUnicodeText(task.status)}</div>
                    </div>
                    ${task.tags && task.tags.length > 0 ? `
                        <div class="form-group">
                            <label>„Çø„Ç∞:</label>
                            <div>${task.tags.map(tag => decodeUnicodeText(tag)).join(', ')}</div>
                        </div>
                    ` : ''}
                    ${task.need && task.need.length > 0 ? `
                        <div class="form-group">
                            <label>‰æùÂ≠òÈñ¢‰øÇ:</label>
                            <div>${task.need.map(dep => decodeUnicodeText(dep)).join(', ')}</div>
                        </div>
                    ` : ''}
                    ${task.result ? `
                        <div class="form-group">
                            <label>ÂÆüË°åÁµêÊûú:</label>
                            <div class="result-content">${decodeUnicodeText(task.result)}</div>
                        </div>
                    ` : ''}
                </div>
            `;
            
            // Add flow diagram section
            html += `
                <div class="section">
                    <h2>üìä „Çø„Çπ„ÇØ„Éï„É≠„Éº</h2>
                    <div id="flowDiagram" class="flow-diagram">
                        <div class="empty-state">
                            <div class="empty-state-icon">üîÑ</div>
                            <div class="empty-state-text">„Éï„É≠„ÉºÂõ≥„ÅØ„Çø„Çπ„ÇØ‰ΩúÊàêÂæå„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</div>
                        </div>
                    </div>
                </div>
            `;
            
            contentBody.innerHTML = html;
        }

        function updateAgentFilter() {
            const agentFilter = document.getElementById('agentFilter');
            const currentValue = agentFilter.value;
            
            // Get unique agents from all tasks
            const uniqueAgents = [...new Set(allTasks.map(task => task.agent))];
            
            // Clear existing options except "„Åô„Åπ„Å¶"
            agentFilter.innerHTML = '<option value="">„Åô„Åπ„Å¶</option>';
            
            // Add agent options
            uniqueAgents.forEach(agent => {
                const option = document.createElement('option');
                option.value = agent;
                option.textContent = agent;
                agentFilter.appendChild(option);
            });
            
            // Restore previous selection if still valid
            if (currentValue && uniqueAgents.includes(currentValue)) {
                agentFilter.value = currentValue;
            }
        }

        function renderFlowDiagram() {
            if (!allTasks || allTasks.length === 0) return;
            
            // Generate Mermaid diagram based on task dependencies
            let mermaidCode = 'graph TD\n';
            
            allTasks.forEach(task => {
                const nodeId = task.id.replace(/[^a-zA-Z0-9]/g, '_');
                const decodedTask = decodeUnicodeText(task.task);
                const label = decodedTask.substring(0, 30) + (decodedTask.length > 30 ? '...' : '');
                
                mermaidCode += `    ${nodeId}[${label}]\n`;
                
                // Add dependencies
                if (task.need && task.need.length > 0) {
                    task.need.forEach(dep => {
                        const depId = dep.replace(/[^a-zA-Z0-9]/g, '_');
                        mermaidCode += `    ${depId} --> ${nodeId}\n`;
                    });
                }
                
                // Add styling based on status
                if (task.status === 'completed') {
                    mermaidCode += `    ${nodeId}:::completed\n`;
                } else if (task.status === 'in_progress') {
                    mermaidCode += `    ${nodeId}:::inProgress\n`;
                } else if (task.status === 'failed') {
                    mermaidCode += `    ${nodeId}:::failed\n`;
                }
            });
            
            // Add style classes
            mermaidCode += `
                classDef completed fill:#dcfce7,stroke:#16a34a,stroke-width:2px
                classDef inProgress fill:#fef3c7,stroke:#d97706,stroke-width:2px
                classDef failed fill:#fecaca,stroke:#dc2626,stroke-width:2px
            `;
            
            const flowDiagram = document.getElementById('flowDiagram');
            if (flowDiagram) {
                flowDiagram.innerHTML = `<div class="mermaid">${mermaidCode}</div>`;
                mermaid.init(undefined, flowDiagram.querySelector('.mermaid'));
            }
        }

        async function createSession() {
            try {
                const result = await apiCall('/api/sessions', 'POST');
                currentSessionId = result.session_id;
                updateSessionInfo();
                showStatus('sessionStatus', `„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü: ${currentSessionId}`);
            } catch (error) {
                showStatus('sessionStatus', `„Çª„ÉÉ„Ç∑„Éß„É≥‰ΩúÊàê„Ç®„É©„Éº: ${error.message}`, true);
            }
        }

        async function saveHearing() {
            if (!currentSessionId) {
                showStatus('hearingStatus', '„Åæ„Åö„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ', true);
                return;
            }
            
            const hearingResult = document.getElementById('hearingResult').value;
            if (!hearingResult.trim()) {
                showStatus('hearingStatus', '„Éí„Ç¢„É™„É≥„Ç∞ÁµêÊûú„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ', true);
                return;
            }
            
            try {
                const result = await apiCall('/api/hearing', 'POST', {
                    session_id: currentSessionId,
                    hearing_result: hearingResult
                });
                showStatus('hearingStatus', result.message);
            } catch (error) {
                showStatus('hearingStatus', `„Éí„Ç¢„É™„É≥„Ç∞‰øùÂ≠ò„Ç®„É©„Éº: ${error.message}`, true);
            }
        }

        async function createTaskPlan() {
            if (!currentSessionId) {
                showStatus('planStatus', '„Åæ„Åö„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ', true);
                return;
            }
            
            const userInstruction = document.getElementById('userInstruction').value;
            if (!userInstruction.trim()) {
                showStatus('planStatus', '„É¶„Éº„Ç∂„ÉºÊåáÁ§∫„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ', true);
                return;
            }
            
            try {
                const result = await apiCall('/api/tasks/create', 'POST', {
                    user_instruction: userInstruction,
                    session_id: currentSessionId
                });
                showStatus('planStatus', result.message);
                
                // „Çø„Çπ„ÇØ„Çπ„ÉÜ„Éº„Çø„Çπ„ÇíËá™ÂãïÊõ¥Êñ∞
                await getTaskStatus();
            } catch (error) {
                showStatus('planStatus', `„Çø„Çπ„ÇØ„Éó„É©„É≥‰ΩúÊàê„Ç®„É©„Éº: ${error.message}`, true);
            }
        }

        async function executeTaskPlan() {
            if (!currentSessionId) {
                showStatus('executionStatus', '„Åæ„Åö„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ', true);
                return;
            }
            
            try {
                const result = await apiCall(`/api/tasks/execute/${currentSessionId}`, 'POST');
                showStatus('executionStatus', result.message);
                
                // ÂÆüË°åÂæå„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„ÇíËá™ÂãïÊõ¥Êñ∞ÈñãÂßã
                startStatusUpdates();
                setTimeout(() => getTaskStatus(), 1000);
            } catch (error) {
                showStatus('executionStatus', `„Çø„Çπ„ÇØÂÆüË°å„Ç®„É©„Éº: ${error.message}`, true);
            }
        }

        async function getTaskStatus() {
            if (!currentSessionId) {
                showStatus('taskList', '„Åæ„Åö„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ', true);
                return;
            }
            
            try {
                const result = await apiCall(`/api/tasks/status/${currentSessionId}`);
                displayTaskStatus(result);
            } catch (error) {
                showStatus('taskList', `„Çπ„ÉÜ„Éº„Çø„ÇπÂèñÂæó„Ç®„É©„Éº: ${error.message}`, true);
            }
        }

        function displayTaskStatus(statusData) {
            const taskProgress = document.getElementById('taskProgress');
            
            if (!statusData.task_data) {
                taskProgress.innerHTML = '<div class="status-box">„Çø„Çπ„ÇØ„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
                return;
            }
            
            // Update global tasks array
            allTasks = [];
            if (statusData.task_data.daily_tasks) {
                allTasks.push(...statusData.task_data.daily_tasks);
            }
            if (statusData.task_data.info_references) {
                allTasks.push(...statusData.task_data.info_references);
            }
            
            // Update task list in sidebar
            displayTaskList(allTasks);
            updateAgentFilter();
            
            // Update progress in main content
            let html = '<h3>üìä „Çø„Çπ„ÇØ„Çπ„ÉÜ„Éº„Çø„Çπ</h3>';
            
            // ÂÆüË°åÈÄ≤Êçó„ÅÆÂèØË¶ñÂåñ
            html += '<div class="progress-section">';
            html += '<h4>üîÑ ÂÆüË°åÈÄ≤Êçó</h4>';
            
            const statusCounts = { pending: 0, in_progress: 0, completed: 0, failed: 0 };
            allTasks.forEach(task => {
                statusCounts[task.status] = (statusCounts[task.status] || 0) + 1;
            });
            
            const totalTasks = allTasks.length;
            if (totalTasks > 0) {
                html += `
                    <div class="progress-bar">
                        <div class="progress-segment status-completed" style="width: ${(statusCounts.completed / totalTasks) * 100}%"></div>
                        <div class="progress-segment status-in_progress" style="width: ${(statusCounts.in_progress / totalTasks) * 100}%"></div>
                        <div class="progress-segment status-pending" style="width: ${(statusCounts.pending / totalTasks) * 100}%"></div>
                        <div class="progress-segment status-failed" style="width: ${(statusCounts.failed / totalTasks) * 100}%"></div>
                    </div>
                    <div class="progress-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #dcfce7"></div>
                            ÂÆå‰∫Ü: ${statusCounts.completed}
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #fef3c7"></div>
                            ÂÆüË°å‰∏≠: ${statusCounts.in_progress}
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #f1f5f9"></div>
                            ÂæÖÊ©ü‰∏≠: ${statusCounts.pending}
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #fecaca"></div>
                            Â§±Êïó: ${statusCounts.failed}
                        </div>
                    </div>
                `;
            }
            html += '</div>';
            
            taskProgress.innerHTML = html;
            
            // Render flow diagram
            renderFlowDiagram();
        }

        async function getAvailableAgents() {
            try {
                const result = await apiCall('/api/agents');
                displayAgents(result);
            } catch (error) {
                showStatus('agentsList', `„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂèñÂæó„Ç®„É©„Éº: ${error.message}`, true);
            }
        }

        function displayAgents(agentsData) {
            const agentsList = document.getElementById('agentsList');
            
            let html = '<div class="agents-list">';
            
            agentsData.agents.forEach(agentKey => {
                const description = agentsData.descriptions[agentKey] || 'Ë™¨Êòé„Å™„Åó';
                html += `
                    <div class="agent-card">
                        <h4>${agentKey}</h4>
                        <p>${description}</p>
                    </div>
                `;
            });
            
            html += '</div>';
            agentsList.innerHTML = html;
        }

        // „É¶„Éº„Çπ„Ç±„Éº„Çπ„Éá„Éº„Çø
        const useCaseData = {
            market_research: {
                hearing: `# „É¶„Éº„Ç∂„ÉºË¶ÅÊúõ„Éí„Ç¢„É™„É≥„Ç∞ÁµêÊûú

## Âü∫Êú¨ÊÉÖÂ†±
- ÊãÖÂΩìËÄÖ: ‰ºÅÁîªÈÉ® Áî∞‰∏≠Êßò
- „Éó„É≠„Ç∏„Çß„ÇØ„Éà: ÁîüÊàêAI‰∫ãÊ•≠ÂèÇÂÖ•Ê§úË®é
- ÊúüÈôê: 2ÈÄ±ÈñìÂæå
- Áî®ÈÄî: ÁµåÂñ∂‰ºöË≠∞„Åß„ÅÆ‰∫ãÊ•≠ÊèêÊ°à

## Ë™øÊüªË¶Å‰ª∂
- **ÂØæË±°È†òÂüü**: ÁîüÊàêAIÊäÄË°ìÔºàÁâπ„Å´„Éû„É´„ÉÅ„É¢„Éº„ÉÄ„É´AIÔºâ
- **Ë™øÊüªÁØÑÂõ≤**: 
  - ÊäÄË°ìÂãïÂêëÔºàÊúÄÊñ∞„ÅÆÁ†îÁ©∂ÈñãÁô∫Áä∂Ê≥ÅÔºâ
  - Â∏ÇÂ†¥ÂãïÂêëÔºàÂ∏ÇÂ†¥Ë¶èÊ®°„ÄÅÊàêÈï∑‰∫àÊ∏¨Ôºâ
  - Á´∂Âêà‰ªñÁ§æÂàÜÊûêÔºà‰∏ªË¶Å„Éó„É¨„Ç§„É§„Éº3-5Á§æÔºâ
  - ÂèÇÂÖ•ÈöúÂ£Å„Å®Ê©ü‰ºöÂàÜÊûê
- **ÊàêÊûúÁâ©**: 
  - PowerPointÁî®„ÅÆ„Çµ„Éû„É™„ÉºÔºà10-15„Éö„Éº„Ç∏Ôºâ
  - Ë©≥Á¥∞Ë™øÊüª„É¨„Éù„Éº„ÉàÔºà30-50„Éö„Éº„Ç∏Ôºâ
  - „Éá„Éº„ÇøË°®„Éª„Ç∞„É©„ÉïÈõÜ

## ÈÄ≤ÊçóÁÆ°ÁêÜË¶Å‰ª∂
- ÈÄ±Ê¨°ÈÄ≤ÊçóÂ†±ÂëäÔºàÊØéÈÄ±ÈáëÊõúÊó•Ôºâ
- ‰∏≠Èñì„ÉÅ„Çß„ÉÉ„ÇØ„Éù„Ç§„É≥„ÉàÔºà1ÈÄ±ÈñìÂæåÔºâ
- ÊúÄÁµÇ„É¨„Éì„É•„ÉºÔºàÊèêÂá∫2Êó•ÂâçÔºâ

## ÂèÇËÄÉÊÉÖÂ†±
- ÈÅéÂéª„Å´ÂÆüÊñΩ„Åó„ÅüÈ°û‰ººË™øÊüª: AI„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„ÉàÂ∏ÇÂ†¥Ë™øÊüªÔºà2023Âπ¥Ôºâ
- ÂèÇËÄÉ„Å´„Åó„Åü„ÅÑÂ†±ÂëäÊõ∏: McKinsey AI Report 2024
- ‰∫àÁÆóÂà∂Á¥Ñ: Â§ñÈÉ®Ë™øÊüª‰ºöÁ§æ„Å∏„ÅÆÂßîË®ó„ÅØ‰∏çÂèØ`,
                instruction: "ÁîüÊàêAIÊäÄË°ì„ÄÅÁâπ„Å´„Éû„É´„ÉÅ„É¢„Éº„ÉÄ„É´AI„ÅÆÂ∏ÇÂ†¥Ë™øÊüª„É¨„Éù„Éº„Éà„Çí‰ΩúÊàê„Åó„Åü„ÅÑ„ÄÇÊäÄË°ìÂãïÂêë„ÄÅÂ∏ÇÂ†¥Ë¶èÊ®°„ÄÅÁ´∂Âêà‰ªñÁ§æÂàÜÊûê„ÇíÂê´„ÇÄÂåÖÊã¨ÁöÑ„Å™Ë™øÊüª„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ„Åæ„Åö„ÅØÂøÖË¶Å„Å™ÊÉÖÂ†±ÂèéÈõÜ„Åã„ÇâÂßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
            },
            data_analysis: {
                hearing: `# „Éá„Éº„ÇøÂàÜÊûê„Éó„É≠„Ç∏„Çß„ÇØ„ÉàË¶Å‰ª∂

## „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊ¶ÇË¶Å
- ÁõÆÁöÑ: Q4Â£≤‰∏ä‰∫àÊ∏¨„É¢„Éá„É´„ÅÆÊßãÁØâ„Å®Á≤æÂ∫¶Ê§úË®º
- „Éá„Éº„ÇøÊúüÈñì: ÈÅéÂéª3Âπ¥Èñì„ÅÆÊúàÊ¨°Â£≤‰∏ä„Éá„Éº„Çø
- ‰∫àÊ∏¨ÂØæË±°: ‰ªäÂõõÂçäÊúüÔºàQ4Ôºâ„ÅÆÊúàÊ¨°Â£≤‰∏ä

## ÊäÄË°ìË¶Å‰ª∂
- **„Éá„Éº„ÇøÂá¶ÁêÜ**: Python/pandas‰ΩøÁî®
- **„É¢„Éá„É™„É≥„Ç∞**: ÊôÇÁ≥ªÂàóÂàÜÊûêÔºàARIMA„ÄÅProphetÔºâ
- **ÂèØË¶ñÂåñ**: matplotlib„ÄÅseaborn‰ΩøÁî®
- **Á≤æÂ∫¶ÊåáÊ®ô**: RMSE„ÄÅMAPE„ÄÅMAE

## ÊàêÊûúÁâ©Ë¶Å‰ª∂
- „Éá„Éº„ÇøÂâçÂá¶ÁêÜ„Ç≥„Éº„Éâ
- Êé¢Á¥¢ÁöÑ„Éá„Éº„ÇøÂàÜÊûêÔºàEDAÔºâ
- „É¢„Éá„É´ÊßãÁØâ„ÉªË©ï‰æ°„Ç≥„Éº„Éâ  
- ‰∫àÊ∏¨ÁµêÊûú„ÅÆÂèØË¶ñÂåñ
- ÊäÄË°ì„É¨„Éù„Éº„ÉàÔºàÊâãÊ≥ïË™¨Êòé„ÉªÁµêÊûúËÄÉÂØüÔºâ
- ÁµåÂñ∂Â±§Âêë„Åë„Çµ„Éû„É™„Éº

## „Éá„Éº„Çø„Éï„Ç°„Ç§„É´
- sales_data.csv: ÊúàÊ¨°Â£≤‰∏ä„Éá„Éº„Çø
- customer_segments.csv: È°ßÂÆ¢„Çª„Ç∞„É°„É≥„ÉàÊÉÖÂ†±
- marketing_spend.csv: „Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ÊäïË≥á„Éá„Éº„Çø`,
                instruction: "Âñ∂Ê•≠„Éá„Éº„Çø„ÅÆÊôÇÁ≥ªÂàóÂàÜÊûê„ÇíË°å„ÅÑ„ÄÅQ4Â£≤‰∏ä‰∫àÊ∏¨„É¢„Éá„É´„ÇíÊßãÁØâ„Åó„Åü„ÅÑ„ÄÇ„Éá„Éº„ÇøÂá¶ÁêÜ„Åã„Çâ‰∫àÊ∏¨„ÄÅ„É¨„Éù„Éº„Éà‰ΩúÊàê„Åæ„Åß‰∏ÄË≤´„Åó„Å¶ÂØæÂøú„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Åæ„Åö„ÅØ„Éá„Éº„Çø„ÅÆÂâçÂá¶ÁêÜ„Å®Êé¢Á¥¢ÁöÑÂàÜÊûê„Åã„ÇâÂßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
            },
            project_management: {
                hearing: `# Web„Çµ„Éº„Éì„ÇπÈñãÁô∫„Éó„É≠„Ç∏„Çß„ÇØ„Éà

## „Çµ„Éº„Éì„ÇπÊ¶ÇË¶Å
- „Çµ„Éº„Éì„ÇπÂêç: TaskFlowÔºà‰ªÆÁß∞Ôºâ
- Ê¶ÇË¶Å: „ÉÅ„Éº„É†Âêë„Åë„Çø„Çπ„ÇØÁÆ°ÁêÜ„ÉªÈÄ≤ÊçóÂèØË¶ñÂåñ„Çµ„Éº„Éì„Çπ
- „Çø„Éº„Ç≤„ÉÉ„Éà: ‰∏≠Â∞è‰ºÅÊ•≠„ÅÆÈñãÁô∫„ÉÅ„Éº„É†Ôºà10-50ÂêçÔºâ

## „Éï„Çß„Éº„Ç∫1Ë¶Å‰ª∂Ôºà‰ºÅÁîª„ÉªË™øÊüªÔºâ
- Â∏ÇÂ†¥Ë™øÊüªÔºàÁ´∂Âêà„Çµ„Éº„Éì„ÇπÂàÜÊûêÔºâ
- ÊäÄË°ìÈÅ∏ÂÆöË™øÊüªÔºà„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„Éª„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÔºâ
- UI/UX„É™„Çµ„Éº„ÉÅ
- „Éì„Ç∏„Éç„Çπ„É¢„Éá„É´Ê§úË®é

## „Éï„Çß„Éº„Ç∫2Ë¶Å‰ª∂ÔºàË®≠Ë®à„ÉªÈñãÁô∫Ôºâ
- „Ç∑„Çπ„ÉÜ„É†Ë®≠Ë®àÊõ∏‰ΩúÊàê
- APIË®≠Ë®à
- „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÈñãÁô∫
- „Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâÈñãÁô∫
- „Éá„Éº„Çø„Éô„Éº„ÇπË®≠Ë®à

## Âà∂Á¥Ñ„ÉªË¶Å‰ª∂
- ÈñãÁô∫ÊúüÈñì: 6„É∂Êúà
- „ÉÅ„Éº„É†Ë¶èÊ®°: 5ÂêçÔºà‰ºÅÁîª1Âêç„ÄÅ„Éá„Ç∂„Ç§„Éä„Éº1Âêç„ÄÅ„Ç®„É≥„Ç∏„Éã„Ç¢3ÂêçÔºâ
- ‰∫àÁÆóÂà∂Á¥Ñ: „Ç§„É≥„Éï„É©„Ç≥„Çπ„Éà„ÇíÊúà10‰∏áÂÜÜ‰ª•ÂÜÖ„Å´ÊäëÂà∂
- ÊäÄË°ìÂà∂Á¥Ñ: React„ÄÅNode.js„ÄÅPostgreSQL‰ΩøÁî®`,
                instruction: "Êñ∞Ë¶èWeb„Çµ„Éº„Éì„Çπ„ÄéTaskFlow„Äè„ÅÆÈñãÁô∫„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÈñãÂßã„Åó„Åü„ÅÑ„ÄÇ„Åæ„Åö„ÅØ‰ºÅÁîª„Éï„Çß„Éº„Ç∫„Åã„ÇâÂßã„ÇÅ„Å¶„ÄÅÊÆµÈöéÁöÑ„Å´Ë®àÁîª„ÇíÁ´ã„Å¶„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂ∏ÇÂ†¥Ë™øÊüª„Å®ÊäÄË°ìÈÅ∏ÂÆö„Åã„ÇâÂßã„ÇÅ„Å¶„ÇÇ„Çâ„Åà„Åæ„Åô„ÅãÔºü"
            }
        };
        
        function loadUseCase() {
            const select = document.getElementById('useCaseSelect');
            const hearingTextarea = document.getElementById('hearingResult');
            const instructionTextarea = document.getElementById('userInstruction');
            
            const selectedCase = select.value;
            if (selectedCase && useCaseData[selectedCase]) {
                hearingTextarea.value = useCaseData[selectedCase].hearing;
                instructionTextarea.value = useCaseData[selectedCase].instruction;
            } else {
                hearingTextarea.value = '';
                instructionTextarea.value = '';
            }
        }
        
        // Ëá™Âãï„Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞
        let statusUpdateInterval;
        
        function startStatusUpdates() {
            if (statusUpdateInterval) {
                clearInterval(statusUpdateInterval);
            }
            statusUpdateInterval = setInterval(() => {
                if (currentSessionId) {
                    getTaskStatus();
                }
            }, 3000); // 3Áßí„Åî„Å®„Å´Êõ¥Êñ∞
        }
        
        function stopStatusUpdates() {
            if (statusUpdateInterval) {
                clearInterval(statusUpdateInterval);
                statusUpdateInterval = null;
            }
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´Âà©Áî®ÂèØËÉΩ„Å™„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÇíÂèñÂæó
        window.addEventListener('load', () => {
            getAvailableAgents();
        });
        
        // „Éö„Éº„Ç∏„ÇíÈõ¢„Çå„Çã„Å®„Åç„Å´„Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞„ÇíÂÅúÊ≠¢
        window.addEventListener('beforeunload', () => {
            stopStatusUpdates();
        });
    </script>
</body>
</html>